<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>VM Management</title>
</head>
<body>
    <h1>VM Management Interface</h1>

    <div>
        <h2>VM Aktionen</h2>
        <input type="text" id="vmName" placeholder="Geben Sie den VM-Namen ein">
        <input type="text" id="token" placeholder="Token eingeben"> <!-- Token Eingabefeld -->

        <button onclick="startVM()">Start</button>
        <button onclick="stopVM()">Stop</button>
        <button onclick="restartVM()">Restart</button>
        <button onclick="deleteVM()">Löschen</button>
    </div>

    <script>
        // Basis-URL Ihrer API
        const baseUrl = 'http://127.0.0.1:8000';

        function performAction(action) {
            const vmName = document.getElementById('vmName').value;
            const token = document.getElementById('token').value; // Token-Wert abrufen

            fetch(`${baseUrl}/${action}-vm/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ vm_name: vmName, token: token }) // Token hinzufügen
            })
            .then(response => response.json())
            .then(data => alert(JSON.stringify(data)))
            .catch(error => console.error('Error:', error));
        }

        // Funktion zum Starten einer VM
        function startVM() {
            performAction('start');
        }

        // Funktion zum Stoppen einer VM
        function stopVM() {
            performAction('stop');
        }

        // Funktion zum Neustarten einer VM
        function restartVM() {
            performAction('restart');
        }

        // Funktion zum Löschen einer VM
        function deleteVM() {
            performAction('delete');
        }
    </script>
</body>
</html>
